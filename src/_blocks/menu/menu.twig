{% macro menuMacro(menu, level) %}
    {# Set our default level as an integer. #}
    {% set default_level = 1 %}
    <ul>
        {% for menu_item in menu %}
            {% set itemKey = random(200) %}
            {# Check if this is the active item. #}
            {% set active = (menu_item.active) ? ' is-active' : '' %}

            {# Check if this item is in the active trail. #}
            {% set active = active ~ ((menu_item.active_trail) ? ' is-active-trail' : '') %}

            <li>
                {% if menu_item.submenu %}
                <input {% if menu_item.title == menu_item.section %}checked{% endif %} id="menu-{{ level }}-{{ default_item +1 }}-{{ itemKey }}" type="checkbox" hidden/>
                    <label for="menu-{{ level }}-{{ default_item +1 }}-{{ itemKey }}">
                        <a class="{{ active }}" href="{{ menu_item.url }}">{{ menu_item.title }}</a>
                        {#<i class="c-icon-plus u-icon menu__aria-toggle" aria-hidden="true" role="img" title="Expand menu"></i>#}
                        <i aria-hidden="true" role="img" title="Expand menu"></i>
                    </label>
                {% else %}
                    <a href="{{ menu_item.url }}">{{ menu_item.title }}</a>
                {% endif %}
                {% if menu_item.submenu %}
                    {# Since this menu item has a submenu, recall function and increment counter. #}
                    {{ _self.menuMacro(menu_item.submenu, level|default(default_level) + 1) }}
                {% endif %}
            </li>
        {% endfor %}
        {% if level is null  %}
            <li>
                {#<a class="menu__expand" href="#" ><span class="u-icon--xxs u-icon--left u-icon--plus">{% include "icons/plus.svg" ignore missing %}<i class="menu__toggle">Expand all</i></span></a>#}
                <a href="#" ><span class="menu__toggle">Expand all</span></a>
            </li>
        {% endif %}
    </ul>
{%- endmacro %}
