/**
 * Layout: Multi Column Background Colours
 * =======================================
 */

.l-multicol {
	padding: $block-padding-s;

	@include media('>868px') {
		padding: $block-margin;
	}

	.u-block {
		padding-left: 0;
		padding-right: 0;
	}
}

.l-multicol--white {
	background-color: white;

	.multicol__content > .u-block--white:first-child,
	.multicol__sidebar > .u-block--white:first-child {
		padding-top: 10px;
	}
}

.l-multicol--grey {
	background-color: $grey;

	.u-block--grey {
		padding-left: 0;
		padding-right: 0;
	}

	.multicol__content > .u-block--grey:first-child {
		padding-top: 10px;
	}
}

/**
 * Layout: Wrapper
 * ===============
 */

.multicol__container {
	display: flex;
	margin: 0 auto; // 40px adds space between layout and footer
}

.multicol__nav {
	display: none;

	@include media('>s') {
		display: block;
		align-self: flex-start; // this is needed for position sticky to work inside a flex container
		// flex-grow: 0;
		// flex-shrink: 0;
		// flex-basis: calc(240px + #{$grid-gutter});
		width: calc(240px + #{$grid-gutter});
		//margin-right: $grid-gutter;
		padding-right: $grid-gutter;
	}
}

.u-masthead-sticky .multicol__nav {
	top: $masthead_height + 20px;
}

.multicol__main,
.multicol__content {
	// overflow: hidden; // NOTE: removed this to prevent drop shadows on cards from being cut off at small breakpoint
	width: 100%;
}

.multicol__main {
	display: flex;
	flex-direction: column;

	@include media('>=s') {
		padding-left: 25px;
		border-left: 1px solid $grey;
	}
}

.multicol__sidebar {
	flex-grow: 0;
	flex-shrink: 0;
	// margin-left: $grid-gutter;
	// padding-left: $grid-gutter;
	// border-left: 1px solid $grey;
}

/**
 * Layout Modifier: Aside + Main
 * =============
 */

.l-multicol--am {
	.multicol__container {
		max-width: calc(1008px + #{$block-padding-m} * 2);
	}
}

/**
 * Layout Modifier: Main + Aside
 * =============
 */

.l-multicol--ma {
	.multicol__container {
		max-width: calc(1068px + #{$block-padding-m} * 2);
	}

	@include media('>1024px') {
		.multicol__main {
			flex-direction: row;
		}
	}

	@include media('>1024px') {
		.multicol__sidebar {
			width: calc(300px + #{$grid-gutter * 2});
			// flex-basis: calc(300px + #{$grid-gutter});
			margin-left: $grid-gutter;
			padding-left: $grid-gutter;
			border-left: 1px solid $grey;
		}

		&.l-multicol--sidebar-large {
			.multicol__sidebar {
				width: calc(400px + #{$grid-gutter * 2});
				// flex-basis: calc(400px + #{$grid-gutter});
				margin-left: $grid-gutter;
				padding-left: $grid-gutter;
				border-left: 1px solid $grey;
			}
		}
	}

	@include media('<=1024px') {
		&.l-multicol--sidebar-top .multicol__content {
			order: 2;
		}
	}
}

/**
 * Layout Modifier: Aside + Main + Aside
 * =============
 */

.l-multicol--ama {
	.multicol__container {
		max-width: calc(1368px + #{$block-padding-m} * 2);
	}

	@include media('>1112px') {
		.multicol__main {
			flex-direction: row;
		}
	}

	@include media('>1112px') {
		.multicol__sidebar {
			width: calc(300px + #{$grid-gutter * 2});
			// flex-basis: calc(300px + #{$grid-gutter});
			margin-left: $grid-gutter;
			padding-left: $grid-gutter;
			border-left: 1px solid $grey;
		}

		&.l-multicol--sidebar-large {
			.multicol__sidebar {
				width: calc(400px + #{$grid-gutter * 2});
				// flex-basis: calc(400px + #{$grid-gutter});
				margin-left: $grid-gutter;
				padding-left: $grid-gutter;
				border-left: 1px solid $grey;
			}
		}
	}

	@include media('<=1112px') {
		&.l-multicol--sidebar-top .multicol__content {
			order: 2;
		}
	}
}
